<html>
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BVWPM1RL4F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-BVWPM1RL4F');
    </script>
    <style>
      body { margin:0; padding:0; }
      iframe { position: absolute; height: 100%; width: 100%; }
    </style>
    <title>Tropical Tower Wars Academy</title>
    <link rel="icon" type="image/x-icon" href="https://i.imgur.com/klv5EHr.png">

    <meta property="og:title" content="TTW Academy - Your Go-To Resource for Tropical Tower Wars" />
    <meta property="og:description" content="Explore player stats, faction details, game strategies, and more for Tropical Tower Wars." />
    <meta property="og:image" content="https://i.imgur.com/DS5Vgig.png" />
    <meta property="og:url" content="https://academy.tropicaltowerwars.com/" />
    <meta property="og:type" content="website" />
  </head>
  <body>
    <iframe id="myIframe" src="" frameborder="0"></iframe>

    <script>
      // Get parameters from the URL of the parent page (GitHub Pages)
      function getQueryParams() {
        const urlParams = new URLSearchParams(window.location.search);
        let paramString = '';

        // Iterate over all parameters to build query string
        urlParams.forEach((value, key) => {
          if (paramString === '') {
            paramString += `${key}=${value}`;
          } else {
            paramString += `&${key}=${value}`;
          }
        });

        return paramString;
      }

      // Dynamically set iframe source with parameters - exec
      const iframe = document.getElementById('myIframe');
      const baseUrl = 'https://script.google.com/macros/s/AKfycbxtqhLxlSwJ004maiERjorkvJqaY8uZyflrvpYlimP6gmtgbcRhfNFUfIoj0yIR2uNjyA/exec';

      // If parameters exist, append them to the iframe URL
      const params = getQueryParams();
      iframe.src = params ? `${baseUrl}?${params}` : baseUrl;
      
      // Get the "mode" parameter from the URL
      function getModeParam() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('mode');
      }
      
      // Set the title based on the "mode" parameter
      function setTitleBasedOnMode() {
        const mode = getModeParam();
        let title;
      
        switch (mode) {
          case 'player_mmr':
            title = 'TTW Academy - Player MMR';
            break;
          case 'maze_designer':
            title = 'TTW Academy - Maze Designer';
            break;
          case 'player_lookup':
            title = 'TTW Academy - Player Lookup';
            break;
          case 'match_lookup':
            title = 'TTW Academy - Match Lookup';
            break;
          case 'faction_info':
            title = 'TTW Academy - Faction Info';
            break;
          default:
            title = 'Tropical Tower Wars Academy'; // Default title if "mode" is not found
        }
      
        // Set the page's title
        document.title = title;
      }
      
      // Call the function to set the title when the page loads
      setTitleBasedOnMode();

    </script>
  </body>
</html>
